// === Embedded data for Desert Fathers family tree ===
// All nodes use images/anthony.png as placeholder

const data = {
  "nodes": [
    { "id": 1, "label": "Anthony the Great", "image": "images/anthony.png", "bio": "Anthony (c. 251–356) is considered the father of monasticism. He lived as a hermit in the Egyptian desert and inspired countless disciples.", "link": "https://en.wikipedia.org/wiki/Anthony_the_Great" },
    { "id": 2, "label": "Macarius the Great", "image": "images/anthony.png", "bio": "Macarius of Egypt (c. 300–391) was a disciple of Anthony and founder of Scetis.", "link": "https://en.wikipedia.org/wiki/Macarius_of_Egypt" },
    { "id": 3, "label": "Macarius the Younger", "image": "images/anthony.png", "bio": "Macarius of Alexandria, known as 'the Younger', was a contemporary of Macarius the Great.", "link": "https://en.wikipedia.org/wiki/Macarius_of_Alexandria" },
    { "id": 4, "label": "Ammonas", "image": "images/anthony.png", "bio": "Ammonas was a disciple of Anthony who later became bishop of Scetis.", "link": "https://orthodoxwiki.org/Ammonas" },
    { "id": 5, "label": "Paphnutius", "image": "images/anthony.png", "bio": "Paphnutius was a spiritual child of Macarius the Great.", "link": "https://orthodoxwiki.org/Paphnutius" },
    { "id": 6, "label": "Evagrius Ponticus", "image": "images/anthony.png", "bio": "Evagrius (c. 345–399) was a disciple of Macarius and a major spiritual writer.", "link": "https://en.wikipedia.org/wiki/Evagrius_Ponticus" },

    // Fictional disciples to reach 50 nodes
    { "id": 7, "label": "Disciple of Macarius I", "image": "images/anthony.png", "bio": "A devoted monk of Scetis.", "link": "#" },
    { "id": 8, "label": "Disciple of Macarius II", "image": "images/anthony.png", "bio": "Follower in the footsteps of Macarius.", "link": "#" },
    { "id": 9, "label": "Disciple of Ammonas I", "image": "images/anthony.png", "bio": "Early ascetic in the Nitrian desert.", "link": "#" },
    { "id": 10, "label": "Disciple of Paphnutius I", "image": "images/anthony.png", "bio": "Hermit living near Kellia.", "link": "#" },
    { "id": 11, "label": "Disciple of Evagrius I", "image": "images/anthony.png", "bio": "Student of Evagrius' teachings.", "link": "#" },

    { "id": 12, "label": "Hermit of Scetis I", "image": "images/anthony.png", "bio": "A humble hermit in Scetis.", "link": "#" },
    { "id": 13, "label": "Hermit of Scetis II", "image": "images/anthony.png", "bio": "Practiced silence and prayer.", "link": "#" },
    { "id": 14, "label": "Disciple of Disciple 7", "image": "images/anthony.png", "bio": "Continued the Macarian tradition.", "link": "#" },
    { "id": 15, "label": "Disciple of Disciple 8", "image": "images/anthony.png", "bio": "Known for hospitality.", "link": "#" },
    { "id": 16, "label": "Hermit of Nitria I", "image": "images/anthony.png", "bio": "Lived in the Nitrian caves.", "link": "#" },

    { "id": 17, "label": "Disciple of Disciple 9", "image": "images/anthony.png", "bio": "Practitioner of unceasing prayer.", "link": "#" },
    { "id": 18, "label": "Disciple of Disciple 10", "image": "images/anthony.png", "bio": "Hermit near Lake Mareotis.", "link": "#" },
    { "id": 19, "label": "Disciple of Disciple 11", "image": "images/anthony.png", "bio": "Student of Evagrian thought.", "link": "#" },
    { "id": 20, "label": "Hermit of Nitria II", "image": "images/anthony.png", "bio": "Practiced solitude.", "link": "#" },
    { "id": 21, "label": "Hermit of Nitria III", "image": "images/anthony.png", "bio": "A wise desert elder.", "link": "#" },

    { "id": 22, "label": "Disciple of 14", "image": "images/anthony.png", "bio": "Lived in a small skete.", "link": "#" },
    { "id": 23, "label": "Disciple of 15", "image": "images/anthony.png", "bio": "Mentor to younger monks.", "link": "#" },
    { "id": 24, "label": "Disciple of 16", "image": "images/anthony.png", "bio": "Practiced night vigils.", "link": "#" },
    { "id": 25, "label": "Disciple of 17", "image": "images/anthony.png", "bio": "Followed strict asceticism.", "link": "#" },
    { "id": 26, "label": "Disciple of 18", "image": "images/anthony.png", "bio": "Companion of Hermits.", "link": "#" },

    { "id": 27, "label": "Hermit of Scetis III", "image": "images/anthony.png", "bio": "Lover of silence.", "link": "#" },
    { "id": 28, "label": "Hermit of Scetis IV", "image": "images/anthony.png", "bio": "Famous for wisdom sayings.", "link": "#" },
    { "id": 29, "label": "Disciple of 19", "image": "images/anthony.png", "bio": "Follower of the Evagrian tradition.", "link": "#" },
    { "id": 30, "label": "Disciple of 20", "image": "images/anthony.png", "bio": "Spent decades in solitude.", "link": "#" },
    { "id": 31, "label": "Disciple of 21", "image": "images/anthony.png", "bio": "Lived near the Cells monastery.", "link": "#" },

    { "id": 32, "label": "Disciple of 22", "image": "images/anthony.png", "bio": "Spiritual son of the Scetis line.", "link": "#" },
    { "id": 33, "label": "Disciple of 23", "image": "images/anthony.png", "bio": "Practiced obedience.", "link": "#" },
    { "id": 34, "label": "Disciple of 24", "image": "images/anthony.png", "bio": "Known for mercy.", "link": "#" },
    { "id": 35, "label": "Disciple of 25", "image": "images/anthony.png", "bio": "Lived in isolation for 40 years.", "link": "#" },
    { "id": 36, "label": "Disciple of 26", "image": "images/anthony.png", "bio": "Hermit near Kellia.", "link": "#" },

    { "id": 37, "label": "Disciple of 27", "image": "images/anthony.png", "bio": "Practiced continual prayer.", "link": "#" },
    { "id": 38, "label": "Disciple of 28", "image": "images/anthony.png", "bio": "Follower of sayings tradition.", "link": "#" },
    { "id": 39, "label": "Disciple of 29", "image": "images/anthony.png", "bio": "Evagrian hermit.", "link": "#" },
    { "id": 40, "label": "Disciple of 30", "image": "images/anthony.png", "bio": "Silent ascetic.", "link": "#" },
    { "id": 41, "label": "Disciple of 31", "image": "images/anthony.png", "bio": "Faithful disciple.", "link": "#" },

    { "id": 42, "label": "Disciple of 32", "image": "images/anthony.png", "bio": "Final generation of Scetis line.", "link": "#" },
    { "id": 43, "label": "Disciple of 33", "image": "images/anthony.png", "bio": "Lived with a companion hermit.", "link": "#" },
    { "id": 44, "label": "Disciple of 34", "image": "images/anthony.png", "bio": "Known for charity.", "link": "#" },
    { "id": 45, "label": "Disciple of 35", "image": "images/anthony.png", "bio": "Practiced silence and stillness.", "link": "#" },
    { "id": 46, "label": "Disciple of 36", "image": "images/anthony.png", "bio": "Student of ascetics.", "link": "#" },
    { "id": 47, "label": "Disciple of 37", "image": "images/anthony.png", "bio": "Lived in the desert caves.", "link": "#" },
    { "id": 48, "label": "Disciple of 38", "image": "images/anthony.png", "bio": "Hermit of great renown.", "link": "#" },
    { "id": 49, "label": "Disciple of 39", "image": "images/anthony.png", "bio": "Studied Evagrian texts.", "link": "#" },
    { "id": 50, "label": "Disciple of 40", "image": "images/anthony.png", "bio": "Final branch of this tree.", "link": "#" }
  ],

  "edges": [
    // Vertical "disciple" edges
    { "from": 1, "to": 2 }, { "from": 1, "to": 3 }, { "from": 1, "to": 4 },
    { "from": 2, "to": 5 }, { "from": 2, "to": 6 }, { "from": 2, "to": 7 },
    { "from": 3, "to": 8 }, { "from": 4, "to": 9 }, { "from": 5, "to": 10 }, { "from": 6, "to": 11 },
    { "from": 7, "to": 14 }, { "from": 8, "to": 15 }, { "from": 9, "to": 17 }, { "from": 10, "to": 18 }, { "from": 11, "to": 19 },
    { "from": 14, "to": 22 }, { "from": 15, "to": 23 }, { "from": 16, "to": 24 }, { "from": 17, "to": 25 }, { "from": 18, "to": 26 },
    { "from": 19, "to": 29 }, { "from": 22, "to": 32 }, { "from": 23, "to": 33 }, { "from": 24, "to": 34 }, { "from": 25, "to": 35 },
    { "from": 26, "to": 36 }, { "from": 27, "to": 37 }, { "from": 28, "to": 38 }, { "from": 29, "to": 39 }, { "from": 30, "to": 40 },
    { "from": 31, "to": 41 }, { "from": 32, "to": 42 }, { "from": 33, "to": 43 }, { "from": 34, "to": 44 }, { "from": 35, "to": 45 },
    { "from": 36, "to": 46 }, { "from": 37, "to": 47 }, { "from": 38, "to": 48 }, { "from": 39, "to": 49 }, { "from": 40, "to": 50 },

    // Companion edges (dashed, horizontal)
    { "from": 2, "to": 3, "dashes": true, "arrows": "none", "color": { "color": "#777" } },
    { "from": 7, "to": 8, "dashes": true, "arrows": "none", "color": { "color": "#777" } },
    { "from": 14, "to": 15, "dashes": true, "arrows": "none", "color": { "color": "#777" } },
    { "from": 18, "to": 19, "dashes": true, "arrows": "none", "color": { "color": "#777" } },
    { "from": 22, "to": 23, "dashes": true, "arrows": "none", "color": { "color": "#777" } },
    { "from": 34, "to": 35, "dashes": true, "arrows": "none", "color": { "color": "#777" } },
    { "from": 48, "to": 49, "dashes": true, "arrows": "none", "color": { "color": "#777" } }
  ]
};

// === Initialize vis-network ===
let network;
let nodesDataset = new vis.DataSet(data.nodes);
let edgesDataset = new vis.DataSet(data.edges);

const container = document.getElementById('tree-container');

const networkData = { nodes: nodesDataset, edges: edgesDataset };

const options = {
  layout: {
    hierarchical: {
      direction: 'UD',
      sortMethod: 'directed',
      levelSeparation: 120,
      nodeSpacing: 200
    }
  },
  physics: false,
  nodes: {
    shape: 'circularImage',
    size: 40,
    borderWidth: 2,
    color: { border: '#8b6f47', background: '#f3eee4' },
    font: { face: 'Segoe UI', size: 14, color: '#333' }
  },
  edges: {
    arrows: { to: { enabled: true, scaleFactor: 0.5 } },
    color: { color: '#8b6f47' },
    smooth: { type: 'cubicBezier', roundness: 0.4 }
  }
};

network = new vis.Network(container, networkData, options);

// === Node click event to show info panel ===
network.on('click', function (params) {
  if (params.nodes.length > 0) {
    const nodeId = params.nodes[0];
    const nodeData = nodesDataset.get(nodeId);
    showInfoPanel(nodeData, params.pointer.DOM);
  } else {
    hideInfoPanel();
  }
});

// === Show info panel (only one at a time) ===
function showInfoPanel(nodeData, pointerDOM) {
  const panel = document.getElementById('info-panel');
  panel.innerHTML = `
    <img src="${nodeData.image}" alt="${nodeData.label}">
    <h2>${nodeData.label}</h2>
    <p>${nodeData.bio}</p>
    <a href="${nodeData.link}" target="_blank">More info</a>
  `;
  panel.style.left = pointerDOM.x + 15 + 'px';
  panel.style.top = pointerDOM.y + 15 + 'px';
  panel.classList.remove('hidden');
}

// === Hide info panel ===
function hideInfoPanel() {
  const panel = document.getElementById('info-panel');
  panel.classList.add('hidden');
}
